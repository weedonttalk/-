# Domino (fixed)

Готовая, рабочая версия сервера и клиента для игры в домино.
Сделано:
- Исправлены ошибки, переписаны сломанные файлы.
- Нормальное подключение к базе данных (MongoDB через Mongoose) с понятными ошибками.
- Кнопки **Добавить игрока** / **Убрать игрока** на экране настройки.
- Возможность выбрать тип бота: **эвристика** или **ChatGPT**.
- Место для API-ключа ChatGPT (`OPENAI_API_KEY`) в `.env` сервера.
- Эндпоинты: `/api/new`, `/api/state/:matchId`, `/api/move`, `/api/draw`, `/api/pass`, `/api/bot`, `/api/bot/openai`.

## Как запустить

1. Установите зависимости:
   ```bash
   npm --prefix server i
   npm --prefix client i
   ```

2. Настройте переменные окружения:
   - Скопируйте `server/.env.example` в `server/.env` и при необходимости измените `MONGODB_URI`.
   - Добавьте `OPENAI_API_KEY`, если хотите ход бота через ChatGPT.

3. Запуск разработки (клиент + сервер):
   ```bash
   node start.mjs
   ```
   Сервер: `http://localhost:5050`, клиент (Vite): `http://localhost:5173` (или порт Vite по умолчанию).

> Если MongoDB недоступна — сервер не стартует и выдаст понятное сообщение. Убедитесь, что локально запущен MongoDB Community Server или используйте MongoDB Atlas.

## Примечания
- Эвристика простая: приоритет дублей, затем максимальная сумма очков.
- GPT-бот запрашивает один тайл в JSON-формате. Модель: `gpt-4o-mini`. Можно поменять в `server/src/controllers/gameController.js`.
